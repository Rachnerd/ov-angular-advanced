<ng-container *ngIf="state$ | async as state">
  <ov-spinner *ngIf="state.loading; else content"></ov-spinner>

  <ng-template #content>
    <p *ngIf="state.error; else list">
      An error has occured: {{ state.error }}
    </p>
    <ng-template #list>
      <ov-products-list
        *ngIf="state.data as products; else noData"
        [products]="products"
        (addToCart)="addProductToCart($event)"
      ></ov-products-list>
    </ng-template>

    <ng-template #noData>
      <p>Nothing is being loaded, there's no error and there's no data?</p>
    </ng-template>
  </ng-template>
</ng-container>
