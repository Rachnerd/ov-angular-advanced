<ng-container *ngIf="state$ | async as state">
  <ov-spinner *ngIf="state.loading; else content"></ov-spinner>

  <ng-template #content>
    <p *ngIf="state.error; else list" date-testid="error-message">
      An error has occured: {{ state.error }}
    </p>
    <ng-template #list>
      <ov-products-list
        [products]="state.data!"
        (addToCart)="addProductToCart($event)"
      ></ov-products-list>
    </ng-template>
  </ng-template>
</ng-container>
